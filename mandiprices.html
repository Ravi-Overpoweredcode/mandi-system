<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MandiSystem – Mandi Prices</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

  <!-- navbar section -->
  <div class="bg-gray-100">
    <header class="bg-sky-500 text-white border-b border-white/30 px-4 md:px-20 relative z-50">
  
      <!-- NAVBAR GRID -->
      <div class="grid grid-cols-[auto_1fr] grid-rows-[auto_auto] items-center">
  
        <!-- LOGO -->
        <div class="row-span-2 flex items-center px-2 md:px-10">
          <img src="image/project logo.png" alt="MandiSystem Logo" class="h-14 md:h-20 w-auto md:scale-150 origin-left" />
        </div>
  
        <!-- TITLE + LANGUAGE + MENU BUTTON -->
        <div class="flex items-center justify-between py-2 border-b border-white/40">
          <div class="leading-tight">
            <h1 class="text-2xl md:text-4xl font-bold">MandiSystem</h1>
            <p class="text-xs opacity-90">Local Mandi Price System</p>
          </div>
  
          <div class="flex items-center gap-3">
            <!-- Language -->
            <select class="bg-white text-black text-sm px-3 py-1 rounded-md focus:outline-none hidden sm:block">
              <option>English</option>
              <option>हिंदी</option>
            </select>
  
            <!-- Hamburger -->
            <button id="menuBtn" class="md:hidden text-3xl focus:outline-none text-white">
              ☰
            </button>
  
          </div>
        </div>
  
        <!-- DESKTOP MENU -->
        <nav class="hidden md:flex gap-8 py-2 text-lg font-semibold">
          <a href="index.html" class="hover:underline">Home</a>
          <a href="mandiprices.html" class="hover:underline">Mandi Prices</a>
          <a href="weather.html" class="hover:underline">Weather</a>
          <a href="krishinews.html" class="hover:underline">Krishi Duniya</a>
          <a href="videos.html" class="hover:underline">Videos</a>
          <a href="farmer.html" class="hover:underline">Farmer</a>
          <a href="wholesaler.html" class="hover:underline">Wholesaler</a>
          <a href="govtpolicy.html" class="hover:underline">Govt. Policy</a>
          <a href="krishiwebstory.html" class="hover:underline">Krishi Web Story</a>
        </nav>
      </div>
  
      <!-- MOBILE MENU -->
      <nav id="mobileMenu" class="hidden md:hidden absolute top-full left-0 w-full
               bg-sky-600 text-white px-6 py-4 space-y-1
               font-semibold text-lg z-50 shadow-lg
               transition-all duration-300">
      
        <a href="index.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Home
        </a>
      
        <a href="mandiprices.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Mandi Prices
        </a>
      
        <a href="weather.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Weather
        </a>
      
        <a href="krishinews.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Krishi Duniya
        </a>
      
        <a href="videos.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Videos
        </a>
      
        <a href="farmer.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Farmer
        </a>
      
        <a href="wholesaler.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Wholesaler
        </a>
      
        <a href="govtpolicy.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Govt. Policy
        </a>
      
        <a href="krishiwebstory.html" class="block px-3 py-2 rounded-lg
                  hover:bg-white/20 hover:pl-6
                  transition-all duration-300">
          Krishi Web Story
        </a>
      </nav>
    </header>
  </div>

  <!-- ================= LIVE MANDI PRICES ================= -->
  <section class="px-20 mt-10">
  
    <div class="flex items-center gap-3 mb-2">
      <span class="h-3 w-3 bg-red-600 rounded-full animate-pulse"></span>
      <h2 class="text-2xl font-bold text-slate-800">Live Mandi Prices</h2>
      <span class="text-sm text-slate-500">(Latest updates)</span>
    </div>
  
    <div class="mb-4">
      <input id="liveSearchInput" type="text" placeholder="Search mandi or crop (e.g. Patna, Tomato)"
        class="w-full md:w-96 px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-sky-500 focus:outline-none" />
    </div>
  
    <div id="liveContainer" class="flex gap-4 overflow-hidden pb-4"></div>
  </section>
  
  <!-- ================= LOCAL SEARCH ================= -->
  <section class="px-20 mt-12">
  
    <div class="flex items-center gap-4 mb-8">
      <div class="flex-1 h-[2px] bg-red-600"></div>
      <h2 class="bg-red-600 text-white px-6 py-2 rounded-full text-xl font-bold">
        TODAY MANDI PRICES
      </h2>
      <div class="flex-1 h-[2px] bg-red-600"></div>
    </div>
  
    <div class="bg-white rounded-xl shadow-lg p-6 border">
      <h3 class="text-lg font-semibold mb-4">Select Your Local Mandi</h3>
  
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <select id="stateSelect" class="px-4 py-3 rounded-lg border">
          <option value="">Select State</option>
        </select>
        <select id="districtSelect" class="px-4 py-3 rounded-lg border">
          <option value="">Select District</option>
        </select>
        <select id="mandiSelect" class="px-4 py-3 rounded-lg border">
          <option value="">Select Mandi</option>
        </select>
        <button id="searchBtn" class="bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-lg px-6 py-3">
          View Prices
        </button>
      </div>
    </div>
  
    <!-- RESULT -->
    <div id="resultCard" class="hidden mt-10 bg-gradient-to-br from-sky-50 to-white rounded-xl shadow-xl p-6 border">
  
      <!-- MANDI HEADER -->
      <div class="text-center mb-6">
        <h3 id="mandiName" class="text-2xl font-bold text-slate-800"></h3>
        <span id="dateBadge" class="inline-block mt-2 bg-sky-600 text-white px-4 py-1 rounded-full text-sm font-semibold">
        </span>
      </div>
  
      <!-- CROPS GRID -->
      <div id="cropPrices" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
  
    </div>
  </section>

  <!-- footer section -->
  <footer class="bg-gray-100 mt-16 border-t">
  
    <div class="px-20 py-12">
  
      <!-- TOP FOOTER GRID -->
      <div class="grid grid-cols-4 gap-10">
  
        <!-- COLUMN 1: ABOUT -->
        <div>
          <!-- LOGO (you add image) -->
          <div class="mb-4">
            <!-- <img src="logo.png" class="h-8" /> -->
            <h3 class="text-xl font-bold text-emerald-600">MandiSystem</h3>
            <p class="text-xs text-gray-500">A division of Emperor pvt ltd</p>
          </div>
  
          <p class="text-sm text-gray-700 leading-relaxed mb-6">
            MandiSystem is a data led Agritech platform owned by Emperor pvt ltd.
            Stay updated on the latest advancements in technology and innovation
            shaping the farming and cultivation sector. Learn how modern
            agriculture is transforming the industry. MandiSystem helps farmers,
            Wholesaler, and Retailers to stay interconnected for better business
            outcomes.
          </p>
  
          <button class="bg-emerald-600 text-white px-4 py-2 rounded-md text-sm font-semibold">
            Get MandiSystem App
          </button>
        </div>
  
        <!-- COLUMN 2: QUICK LINKS -->
        <div>
          <h4 class="text-lg font-semibold mb-3">Quick Links</h4>
          <div class="w-12 h-0.5 bg-emerald-500 mb-4"></div>
  
          <ul class="space-y-3 text-sm text-gray-700">
            <li>Mandi Prices</li>
            <li>Weather</li>
            <li>Krishi Duniya</li>
            <li>Videos</li>
            <li>Farmer</li>
            <li>Wholesaler</li>
          </ul>
        </div>
  
        <!-- COLUMN 3: USEFUL LINKS -->
        <div>
          <h4 class="text-lg font-semibold mb-3">Useful Links</h4>
          <div class="w-12 h-0.5 bg-emerald-500 mb-4"></div>
  
          <ul class="space-y-3 text-sm text-gray-700">
            <li>About Us</li>
            <li>Privacy Policy</li>
            <li>Terms & Conditions</li>
            <li>Contact Us</li>
            <li>Blog</li>
            <li>Sitemap</li>
          </ul>
        </div>
  
        <!-- COLUMN 4: GET IN TOUCH -->
        <div>
          <h4 class="text-lg font-semibold mb-3">Get In Touch</h4>
          <div class="w-12 h-0.5 bg-emerald-500 mb-4"></div>
  
          <p class="text-sm text-gray-700 mb-2">
            <strong>Address:</strong> E-1/124, Emperor - 462016
          </p>
          <p class="text-sm text-gray-700 mb-2">
            <strong>Phone:</strong> +91-98938160
          </p>
          <p class="text-sm text-gray-700 mb-6">
            <strong>Email:</strong> ravikumar91622436@gmail.com
          </p>
  
          <!-- SOCIAL ICONS (you add icons/images) -->
          <div class="flex gap-3">
            <div class="w-9 h-9 bg-gray-300 rounded"></div>
            <div class="w-9 h-9 bg-gray-300 rounded"></div>
            <div class="w-9 h-9 bg-gray-300 rounded"></div>
            <div class="w-9 h-9 bg-gray-300 rounded"></div>
            <div class="w-9 h-9 bg-gray-300 rounded"></div>
          </div>
        </div>
      </div>
  
      <!-- BOTTOM COPYRIGHT -->
      <div class="mt-12 border-t pt-4 text-center text-sm text-gray-600 bg-transparent">
        Copyright © MandiSystem. All Rights Reserved
      </div>
    </div>
  
    <!-- GRASS IMAGE AREA (you add image) -->
    <div class="h-20">
      <img src="image/footer.png" class="w-full h-full object-cover" />
    </div>
  </footer>

  <!-- ================= JAVASCRIPT ================= -->
  <script>
    /* ================= LIVE PRICES ================= */
    const liveContainer = document.getElementById("liveContainer");
    const liveSearchInput = document.getElementById("liveSearchInput");

    let livePrices = [];
    let scrollX = 0;
    let isHovering = false;

    fetch("live-mandi-prices.json")
      .then(res => res.json())
      .then(data => {
        livePrices = data.prices;
        buildLiveCards(livePrices);
        requestAnimationFrame(autoScroll);
      });

    function buildLiveCards(data) {
      liveContainer.innerHTML = "";
      if (!data.length) {
        liveContainer.innerHTML = `<p class="text-gray-500">No live prices found</p>`;
        return;
      }

      [...data, ...data].forEach(item => {
        liveContainer.innerHTML += `
        <div class="min-w-[260px] flex-shrink-0 bg-white rounded-xl shadow p-4 border">
          <div class="flex justify-between mb-1">
            <h3 class="font-bold">${item.crop}</h3>
            <span class="text-xs bg-red-100 text-red-700 px-2 rounded">LIVE</span>
          </div>
          <p class="text-sm text-gray-500">${item.mandi} Mandi</p>
          <p class="mt-3 font-semibold text-green-700">
            ₹${item.min} – ₹${item.max}
          </p>
          <p class="text-xs text-gray-400 mt-2">
            Updated ${item.updatedMinutesAgo} min ago
          </p>
        </div>
      `;
      });

      scrollX = 0;
    }

    function autoScroll() {
      if (!isHovering && liveContainer.scrollWidth > liveContainer.clientWidth) {
        scrollX += 0.3;
        if (scrollX >= liveContainer.scrollWidth / 2) scrollX = 0;
        liveContainer.scrollLeft = scrollX;
      }
      requestAnimationFrame(autoScroll);
    }

    liveContainer.addEventListener("mouseenter", () => isHovering = true);
    liveContainer.addEventListener("mouseleave", () => isHovering = false);

    liveSearchInput.addEventListener("input", () => {
      const q = liveSearchInput.value.toLowerCase();
      const filtered = livePrices.filter(i =>
        i.mandi.toLowerCase().includes(q) ||
        i.crop.toLowerCase().includes(q)
      );
      buildLiveCards(filtered);
    });

    /* ================= LOCAL SEARCH (MULTI CROP) ================= */
    let mandiData = {};

    fetch("mandiprices.json")
      .then(res => res.json())
      .then(data => {
        mandiData = data;
        Object.keys(data).forEach(s => {
          stateSelect.innerHTML += `<option>${s}</option>`;
        });
      });

    stateSelect.onchange = () => {
      districtSelect.innerHTML = `<option>Select District</option>`;
      mandiSelect.innerHTML = `<option>Select Mandi</option>`;
      Object.keys(mandiData[stateSelect.value] || {})
        .forEach(d => districtSelect.innerHTML += `<option>${d}</option>`);
    };

    districtSelect.onchange = () => {
      mandiSelect.innerHTML = `<option>Select Mandi</option>`;
      Object.keys(mandiData[stateSelect.value][districtSelect.value] || {})
        .forEach(m => mandiSelect.innerHTML += `<option>${m}</option>`);
    };

    searchBtn.onclick = () => {
      const mandi =
        mandiData[stateSelect.value]
        [districtSelect.value]
        [mandiSelect.value];

      if (!mandi) return alert("Select all fields");

      resultCard.classList.remove("hidden");
      mandiName.innerText = mandiSelect.value;
      dateBadge.innerText = mandi.date;

      const cropPrices = document.getElementById("cropPrices");
      cropPrices.innerHTML = "";

      mandi.crops.forEach(crop => {
        cropPrices.innerHTML += `
        <div class="bg-white rounded-xl shadow p-5 border">
          <h4 class="text-lg font-bold text-green-700 mb-3">
            ${crop.name}
          </h4>
  
          <div class="flex justify-between text-sm mb-2">
            <span class="text-slate-500">Yesterday</span>
            <span>₹${crop.yesterday.min} – ₹${crop.yesterday.max}</span>
          </div>
  
          <div class="flex justify-between text-sm font-semibold text-green-700">
            <span>Today</span>
            <span>₹${crop.today.min} – ₹${crop.today.max}</span>
          </div>
  
          <p class="text-xs text-slate-400 mt-3">
            ₹ per 100 kg
          </p>
        </div>
      `;
      });
    };
  </script>

  <!-- for responsive navbar -->
   <script>
  const menuBtn = document.getElementById("menuBtn");
  const mobileMenu = document.getElementById("mobileMenu");

  menuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
    menuBtn.textContent =
      menuBtn.textContent.trim() === "☰" ? "✕" : "☰";
  });
  </script>

</body>
</html>

